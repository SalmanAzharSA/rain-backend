openapi: 3.0.3
info:
  title: Rain
  description: Rain API's Documentation
  version: 1.0.0

servers:
  - url: http://localhost:3000
    description: Local server

tags:
  - name: Auth
    description: Authentication Endpoints
  - name: Users
    description: User Endpoints
  - name: Comments
    description: Comments Endpoints
  - name: Pools
    description: Pools Endpoints
security:
  - bearerAuth: []

paths:

  /auth/register-with-walletAddress:
    post:
      tags:
        - Auth
      summary: Register user with wallet address
      description: Registers a new user by verifying their wallet address using a signed message.
      operationId: registerWithWalletAddress
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                sign:
                  type: string
                  description: The signed message to verify the user's wallet address
                  example: "0x..."
                name:
                  type: string
                  description: The name of the user
                  example: "John Doe"
                bio:
                  type: string
                  description: The bio of the user (optional)
                  example: "Web3 enthusiast"
                object:
                  type: object
                  description: The object containing the message to be signed
                  properties:
                    address:
                      type: string
                      description: The wallet address of the user
                      example: "0x1234567890abcdef1234567890abcdef12345678"
                    message:
                      type: string
                      description: The message to be signed by the user
                      example: "Sign this message to verify ownership of the wallet."
      responses:
        200:
          description: User registered successfully
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: boolean
                    example: true
                  msg:
                    type: string
                    example: "User Registered"
                  token:
                    type: string
                    example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjYwYjZkNzI4NmNhZTYzZTJiODMzNjEwZGVkYTA1ZTUzYTciLCJpYXQiOiJhbG9n..."
                  user:
                    type: object
                    properties:
                      _id:
                        type: string
                        example: "60b6c72b7c71bf76c5d4be65"
                      name:
                        type: string
                        example: "John Doe"
                      walletAddress:
                        type: string
                        example: "0x1234567890abcdef1234567890abcdef12345678"
        400:
          description: Bad request, missing required fields
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                    example: "All inputs are required"
        401:
          description: Unauthorized, signature verification failed or wallet address not correct
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                    example: "Sign not verified"
        409:
          description: Conflict, user already exists
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                    example: "User already exists"
        500:
          description: Internal Server Error, something went wrong on the server
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                    example: "Error during registration: <error message>"
  /auth/login-with-walletAddress:
    post:
      tags:
        - Auth
      summary: User login using wallet address and signed message
      description: Log in a user by verifying the signature of their wallet address.
      operationId: loginWithWalletAddress
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                walletAddress:
                  type: string
                  description: The wallet address of the user.
                  example: "0xF2Adc1FAC6629B567cF60154C3FEA4e498E58C91"
                sign:
                  type: string
                  description: The signed message to verify the user's wallet address.You can generate this signed message using a tool like [codesandbox.io](https://codesandbox.io/p/sandbox/react-eth-metamask-signatures-ibuxj?file=%2Fsrc%2FApp.js).
                  example: "0x..."
                object:
                  type: object
                  description: The object containing the message to be signed and wallet address.
                  properties:
                    address:
                      type: string
                      description: The wallet address of the user
                      example: "0x1234567890abcdef1234567890abcdef12345678"
                    message:
                      type: string
                      description: The message to be signed by the user
                      example: "Sign this message to verify ownership of the wallet."
      responses:
        200:
          $ref: "#/components/responses/LoginSuccess"
        400:
          description: Bad request, missing required fields
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                    example: "Sign and wallet address are required"
        404:
          $ref: "#/components/responses/UserNotFoundError"
        401:
          description: Unauthorized, signature verification failed
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                    example: "Sign not verified"
        500:
          description: Internal server error, something went wrong on the server
          content:
            application/json:
              schema:
                type: object
                properties:
                  msg:
                    type: string
                    example: "Error during login: <error message>"
  /auth/login:
    post:
      tags:
        - Auth
      summary: User login
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email:
                  type: string
                  example: user@example.com
                password:
                  type: string
                  example: password123
      responses:
        200:
          description: Successful login
          content:
            application/json:
              schema:
                type: object
                properties:
                  token:
                    type: string
                    example: "eyJhbGciOiJIUzI1NiIsInR..."

  /users/me:
    get:
      tags:
        - Users
      summary: Get current user profile
      security:
        - bearerAuth: []
      responses:
        200:
          description: Success
          content:
            application/json:
              schema:
                type: object
                properties:
                  id:
                    type: string
                    example: "60d0fe4f5311236168a109ca"
                  name:
                    type: string
                    example: John Doe
                  email:
                    type: string
                    example: john@example.com
        401:
          $ref: "#/components/responses/UnauthorizedError"
  /users/find-user-by-wallet-address:
    get:
      tags:
        - Users
      summary: Retrieve user by wallet address
      description: Retrieve user details using their wallet address.
      operationId: findUserBywalletAddress
      parameters:
        - name: walletAddress
          in: query
          required: true
          description: The wallet address of the user to retrieve.
          schema:
            type: string
            example: "0xF2Adc1FAC6629B567cF60154C3FEA4e498E58C91"
      responses:
        200:
          $ref: "#/components/responses/UserRetrievedSuccess"
        404:
          $ref: "#/components/responses/UserNotFound"
        500:
          description: Internal server error
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 500
                  message:
                    type: string
                    example: "Error retrieving user: <error message>"
    tags:
      - Users
    summary: Retrieve user by wallet address
    description: Retrieve user details using their wallet address.
    operationId: findUserBywalletAddress
    parameters:
      - name: walletAddress
        in: query
        required: true
        description: The wallet address of the user to retrieve.
        schema:
          type: string
          example: "0xF2Adc1FAC6629B567cF60154C3FEA4e498E58C91"
    responses:
      200:
        $ref: "#/components/responses/UserRetrievedSuccess"
      404:
        $ref: "#/components/responses/UserNotFound"
      500:
        description: Internal server error
        content:
          application/json:
            schema:
              type: object
              properties:
                statusCode:
                  type: integer
                  example: 500
                message:
                  type: string
                  example: "Error retrieving user: <error message>"

  /comments/create-comment:
    post:
      summary: "Create a new comment"
      description: "Create a new comment for a pool or post. The comment will be associated with a pool and can be used to express user feedback or interaction. This endpoint can also be used for replying to an existing comment by providing a parentCommentId."
      operationId: "createComment"
      tags:
        - "Comments"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                comment:
                  type: string
                  description: "The content of the comment (e.g., 'This pool is awesome!')"
                  example: "This pool is awesome!"
                poolId:
                  type: string
                  format: objectid
                  description: "The ID of the pool the comment is associated with."
                  example: "674eddb85a824475440a28a6"
                parentCommentId:
                  type: string
                  format: objectid
                  description: "The ID of the comment you want to reply to. This field is optional, use it when replying to an existing comment."
                  example: "674eddb85a824475440a28a6"
      responses:
        200:
          description: "Comment created successfully"
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 200
                  message:
                    type: string
                    example: "Comment created successfully"
                  data:
                    type: object
                    properties:
                      commentId:
                        type: string
                        description: "The unique identifier for the newly created comment."
                        example: "67485b984a2f4e38b8c976b7"
                      content:
                        type: string
                        description: "The content of the comment."
                        example: "This pool is awesome!"
                      poolId:
                        type: string
                        format: objectid
                        description: "The pool ID that the comment is linked to."
                        example: "60d5f3a5b0a7ac001c2d51a3"
        400:
          description: "Bad request, missing required fields or invalid data"
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 400
                  message:
                    type: string
                    example: "Bad request, some required fields are missing or invalid."
        500:
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 500
                  message:
                    type: string
                    example: "Error creating comment: internal server error."

    post:
      summary: "Create a new comment"
      description: "Create a new comment for a pool or post. The comment will be associated with a pool and can be used to express user feedback or interaction."
      operationId: "createComment"
      tags:
        - Comments
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                comment:
                  type: string
                  description: "The content of the comment (e.g., 'This pool is awesome!')"
                  example: "This pool is awesome!"
                poolId:
                  type: string
                  format: objectid
                  description: "The ID of the pool the comment is associated with."
                  example: "60d5f3a5b0a7ac001c2d51a3"
                parentCommentId:
                  type: string
                  format: objectid
                  description: "The ID of the comment u wnat to reply associated with."
                  example: "60d5f3a5b0a7ac001c2d51a3"
      responses:
        200:
          description: "Comment created successfully"
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 200
                  message:
                    type: string
                    example: "Comment created successfully"
                  data:
                    type: object
                    properties:
                      commentId:
                        type: string
                        description: "The unique identifier for the newly created comment."
                        example: "67485b984a2f4e38b8c976b7"
                      content:
                        type: string
                        description: "The content of the comment."
                        example: "This pool is awesome!"
                      poolId:
                        type: string
                        format: objectid
                        description: "The pool ID that the comment is linked to."
                        example: "60d5f3a5b0a7ac001c2d51a3"
      400:
        description: "Bad request, missing required fields or invalid data"
        content:
          application/json:
            schema:
              type: object
              properties:
                statusCode:
                  type: integer
                  example: 400
                message:
                  type: string
                  example: "Bad request, some required fields are missing or invalid."
      500:
        description: "Internal Server Error"
        content:
          application/json:
            schema:
              type: object
              properties:
                statusCode:
                  type: integer
                  example: 500
                message:
                  type: string
                  example: "Error creating comment: internal server error."
  /comments/comments-listing:
    get:
      tags:
        - Comments
      summary: Retrieve comments for a pool
      description: Get all comments for a specific pool with pagination
      parameters:
        - name: poolId
          in: query
          required: true
          description: ID of the pool
          schema:
            type: string
            example: "60b6c72b7c71bf76c5d4be65"
        - name: limit
          in: query
          required: false
          description: Number of comments to fetch per page
          schema:
            type: integer
            default: 10
        - name: offset
          in: query
          required: false
          description: Page number
          schema:
            type: integer
            default: 0
      responses:
        200:
          description: A list of comments
          content:
            application/json:
              schema:
                type: object
                properties:
                  comments:
                    type: array
                    items:
                      type: object
                      properties:
                        commentId:
                          type: string
                          example: "60b6c72b7c71bf76c5d4be65"
                        comment:
                          type: string
                          example: "This is a comment."
        400:
          description: Bad request
        404:
          description: Comments not found
  /comments/update-comment/{commentId}:
    put:
      summary: "Update a comment"
      description: "Update the content of an existing comment. Only the user who created the comment can update it."
      operationId: "updateComment"
      tags:
        - "Comments"
      parameters:
        - name: "commentId"
          in: "path"
          description: "The unique identifier of the comment to update"
          required: true
          schema:
            type: string
            format: objectid
            example: "674efedfd7c0e96cc67cfa38"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                comment:
                  type: string
                  description: "The updated content of the comment."
                  example: "This pool has great potential!"
      responses:
        200:
          description: "Comment updated successfully"
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 200
                  message:
                    type: string
                    example: "Comment updated successfully."
                  data:
                    type: object
                    properties:
                      commentId:
                        type: string
                        description: "The unique identifier for the updated comment."
                        example: "674efedfd7c0e96cc67cfa38"
                      content:
                        type: string
                        description: "The updated content of the comment."
                        example: "This pool has great potential!"
                      userId:
                        type: string
                        description: "The user ID of the comment creator."
                        example: "60d5f3a5b0a7ac001c2d51a3"
        400:
          description: "Bad request, invalid or missing data"
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 400
                  message:
                    type: string
                    example: "Bad request, invalid or missing data."
        404:
          description: "Comment not found or you do not have permission to update this comment"
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 404
                  message:
                    type: string
                    example: "Comment not found or you do not have permission to update this comment."
        500:
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 500
                  message:
                    type: string
                    example: "Error updating comment: internal server error."
  /comments/like/{commentId}:
    post:
      summary: "Like a comment"
      description: "Allows a user to like a specific comment. A user can only like a comment once. If the user has already liked the comment, they will get an error."
      operationId: "likeComment"
      tags:
        - "Comments"
      parameters:
        - name: "commentId"
          in: "path"
          description: "The unique identifier of the comment to like."
          required: true
          schema:
            type: string
            pattern: "^[0-9a-fA-F]{24}$"
            example: "674efda6d7c0e96cc67cfa24"
      responses:
        200:
          description: "Comment liked successfully"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Comment liked successfully."
        400:
          description: "Bad request, invalid or missing commentId"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Invalid commentId format."
        404:
          description: "Comment not found or already liked"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "You have already liked this comment."
        500:
          description: "Internal server error"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Error liking comment: internal server error."
  /comments/unlike/{commentId}:
    post:
      summary: "Unlike a comment"
      description: "Allows a user to unlike a specific comment. A user can only unlike a comment they have previously liked."
      operationId: "unlikeComment"
      tags:
        - "Comments"
      parameters:
        - name: "commentId"
          in: "path"
          description: "The unique identifier of the comment to unlike."
          required: true
          schema:
            type: string
            pattern: "^[0-9a-fA-F]{24}$"
            example: "674efda6d7c0e96cc67cfa24"
      responses:
        200:
          description: "Comment unliked successfully"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: true
                  message:
                    type: string
                    example: "Comment unliked successfully."
        400:
          description: "Bad request, invalid or missing commentId"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Invalid commentId format."
        404:
          description: "Comment not found or not previously liked"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "You have not liked this comment."
        500:
          description: "Internal server error"
          content:
            application/json:
              schema:
                type: object
                properties:
                  success:
                    type: boolean
                    example: false
                  message:
                    type: string
                    example: "Error unliking comment: internal server error."

  /pools/create-pool:
    post:
      summary: "Create a new pool"
      description: "Create a new pool with the specified question, options, and other data. If the pool is private, an access code will be generated automatically."
      operationId: "createPool"
      tags:
        - "Pools"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                question:
                  type: string
                  description: "The question for the pool (e.g., 'Will the price of ETH rise in the next week?')"
                  example: "Will the price of ETH rise in the next week?"
                questionImage:
                  type: string
                  description: "URL of an image related to the question"
                  example: "https://example.com/question-image.jpg"
                options:
                  type: array
                  items:
                    type: object
                    properties:
                      optionName:
                        type: string
                        description: "The name of the option"
                        example: "Yes"
                      optionImage:
                        type: string
                        description: "URL of the image representing the option"
                        example: "https://example.com/yes-option.jpg"
                  description: "The possible options for the pool (e.g., ['Yes', 'No'])"
                  example:
                    - optionName: "Yes"
                      optionImage: "https://example.com/yes-option.jpg"
                    - optionName: "No"
                      optionImage: "https://example.com/no-option.jpg"
                tags:
                  type: array
                  items:
                    type: string
                  description: "Tags related to the pool"
                  example: ["CRYPTO", "MOVIES", "SPORTS"]
                creator:
                  type: string
                  format: objectid
                  description: "User ID of the creator"
                  example: "60d5f3a5b0a7ac001c2d51a3"
                isPrivate:
                  type: boolean
                  description: "Flag indicating whether the pool is private or public"
                  example: true
                liquidityMax:
                  type: number
                  description: "Maximum liquidity for the pool"
                  example: 10000
                startDate:
                  type: string
                  format: date-time
                  description: "The start date and time for the pool"
                  example: "2024-12-10T12:00:00Z"
                poolTypeData:
                  type: array
                  description: "Data specific to public pools"
                  items:
                    type: object
                    properties:
                      minimumOracles:
                        type: number
                        description: "Minimum number of oracles required for the pool"
                        example: 3
                      maximumOracles:
                        type: number
                        description: "Maximum number of oracles allowed for the pool"
                        example: 5
                      rewardType:
                        type: string
                        enum: ["fixedAmount", "baseAmountPlusBonus"]
                        description: "Type of reward for the pool"
                        example: "fixedAmount"
                      rewardDetails:
                        type: object
                        properties:
                          fixedAmount:
                            type: object
                            properties:
                              rewardAmountPerOracle:
                                type: number
                                description: "The reward amount per oracle"
                                example: 100
                          baseAmountPlusBonus:
                            type: object
                            properties:
                              baseAmountPerOracle:
                                type: number
                                description: "Base reward amount per oracle"
                                example: 50
                              associatedDealSize:
                                type: number
                                description: "Associated deal size for the pool"
                                example: 1000
                              bonusPercentage:
                                type: number
                                description: "Bonus percentage for the reward"
                                example: 10
                      timeZone:
                        type: string
                        description: "Time zone for the pool"
                        example: "UTC"
                      duration:
                        type: number
                        description: "Duration of the pool in days"
                        example: 7
              required:
                - question
                - questionImage
                - options
                - creator
                - isPrivate
                - liquidityMax
                - startDate
                - poolTypeData
      responses:
        201:
          description: "Pool created successfully"
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 201
                  message:
                    type: string
                    example: "Pool created successfully."
                  data:
                    type: object
                    properties:
                      _id:
                        type: string
                        description: "Unique identifier of the pool"
                        example: "60d5f3a5b0a7ac001c2d51a3"
                      question:
                        type: string
                        example: "Will the price of ETH rise in the next week?"
                      questionImage:
                        type: string
                        example: "https://example.com/question-image.jpg"
                      options:
                        type: array
                        items:
                          type: object
                          properties:
                            optionName:
                              type: string
                              example: "Yes"
                            optionImage:
                              type: string
                              example: "https://example.com/yes-option.jpg"
                      tags:
                        type: array
                        items:
                          type: string
                        example: ["cryptocurrency", "ETH", "prediction"]
                      creator:
                        type: string
                        example: "60d5f3a5b0a7ac001c2d51a3"
                      isPrivate:
                        type: boolean
                        example: true
                      liquidityMax:
                        type: number
                        example: 10000
                      startDate:
                        type: string
                        format: date-time
                        example: "2024-12-10T12:00:00Z"
                      poolTypeData:
                        type: array
                        items:
                          type: object
                          properties:
                            minimumOracles:
                              type: number
                              example: 3
                            maximumOracles:
                              type: number
                              example: 5
                            rewardType:
                              type: string
                              example: "fixedAmount"
                            rewardDetails:
                              type: object
                              properties:
                                fixedAmount:
                                  type: object
                                  properties:
                                    rewardAmountPerOracle:
                                      type: number
                                      example: 100
                                baseAmountPlusBonus:
                                  type: object
                                  properties:
                                    baseAmountPerOracle:
                                      type: number
                                      example: 50
                                    associatedDealSize:
                                      type: number
                                      example: 1000
                                    bonusPercentage:
                                      type: number
                                      example: 10
                            timeZone:
                              type: string
                              example: "UTC"
                            duration:
                              type: number
                              example: 7
                      poolTrxHash:
                        type: string
                        description: "Transaction hash for the pool creation on the blockchain"
                        example: "0x8c7749a314bc8ee0dbfa3f5397f3475f63186efeb64e7f1cdbb63e1d9cdaf89f"
                      contractAddress:
                        type: string
                        description: "Smart contract address where the pool is deployed"
                        example: "0x2dB2b55feB45d8e4F4ecD0F51769497e4F7f45F7"
        400:
          description: "Bad request, missing required fields or invalid data"
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 400
                  message:
                    type: string
                    example: "Bad request, some required fields are missing or invalid."
        500:
          description: "Internal Server Error"
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 500
                  message:
                    type: string
                    example: "Error creating pool: internal server error."
  /pools/accessPool:
    post:
      summary: "Access a private pool using the access code"
      description: "Access a private pool by providing the pool ID and the correct access code."
      operationId: "accessPool"
      tags:
        - "Pools"
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                poolId:
                  type: string
                  description: "The ID of the pool you want to access"
                  example: "60c72b2f9b1d8a001c8cbb7d"
                accessCode:
                  type: string
                  description: "The access code for a private pool"
                  example: "a1b2c3d4"
              required:
                - poolId
                - accessCode
      responses:
        200:
          description: "Access granted to the pool"
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 200
                  message:
                    type: string
                    example: "Access granted"
                  data:
                    type: object
                    properties:
                      poolId:
                        type: string
                        example: "60c72b2f9b1d8a001c8cbb7d"
                      question:
                        type: string
                        example: "What will be the weather like next week?"
                      isPrivate:
                        type: boolean
                        example: true
        403:
          description: "Forbidden. Invalid access code"
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 403
                  message:
                    type: string
                    example: "Invalid access code for private pool"
        404:
          description: "Pool not found"
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 404
                  message:
                    type: string
                    example: "Pool not found"
  /pools/pool-listing-by-creator:
    get:
      summary: Retrieve a list of pools created by a user
      description: Fetch a list of pools created by the authenticated user, filtered by privacy type (private/public).
      operationId: getPoolsByCreator
      tags:
        - Pools
      parameters:
        - in: query
          name: limit
          description: Number of pools to retrieve per page (default: 10)
          required: false
          schema:
            type: integer
            minimum: 1
            default: 10
        - in: query
          name: offset
          description: Page offset for pagination (default: 1)
          required: false
          schema:
            type: integer
            minimum: 1
            default: 1
        - in: query
          name: filter
          description: Filter pools by privacy type. Options: `privatePools`, `publicPools`. 
            Defaults to public pools if not provided.
          required: false
          schema:
            type: string
            enum: 
              - privatePools
              - publicPools
      responses:
        200:
          description: Successfully retrieved the pools list
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 200
                  message:
                    type: string
                    example: Pools list retrieved successfully
                  data:
                    type: object
                    properties:
                      pools:
                        type: array
                        items:
                          $ref: '#/components/schemas/Pool'
                      count:
                        type: integer
                        example: 5
                      pages:
                        type: integer
                        example: 1
        400:
          description: Invalid request parameters
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 400
                  message:
                    type: string
                    example: "limit must be greater than or equal to 1"
        401:
          description: Unauthorized access, invalid token
        404:
          description: Pools not found
        500:
          description: Internal server error
  /pools/sign-participation:
    post:
      summary: Signs a participation transaction for a pool.
      description: This endpoint allows a user to sign a participation transaction in a pool. The transaction includes details like the wallet address, the option selected, the amount to invest, and the timestamp.
      tags:
        - Pools
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                walletAddress:
                  type: string
                  description: The Ethereum address of the user who is participating.
                  example: "0x5b1b2268f3a563c3a65b1f2a34032c73e607ec6c"
                option:
                  type: integer
                  description: The option the user is selecting (usually an index or ID of the option).
                  example: 1
                amount:
                  type: number
                  description: The amount the user is investing (in USDT or token).
                  example: 100
                timestamp:
                  type: integer
                  description: The timestamp when the transaction is being signed, in epoch format (seconds).
                  example: 1637782800
      responses:
        '200':
          description: Successfully signed participation transaction
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 200
                  message:
                    type: string
                    example: "Transaction signed successfully"
                  data:
                    type: object
                    properties:
                      signature:
                        type: string
                        description: The signed message from the private key.
                        example: "0x4e9b98f34d97c0e2b1e76c89a6c1995e50e207e8d7fdb53ed8ff035b0fe9512d56e92f7b6b287585fcdc8466da923ad0e1f071d3b22005145c13f2f313b06f41"
        '400':
          description: Bad request, invalid input
        '500':
          description: Internal server error
  /pools/sign-swap:
    post:
      summary: Signs a swap transaction for the pool.
      description: This endpoint allows a user to sign a swap transaction where they swap their votes from one option to another.
      tags:
        - Pools
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                walletAddress:
                  type: string
                  description: The Ethereum address of the user.
                  example: "0x5b1b2268f3a563c3a65b1f2a34032c73e607ec6c"
                optionFrom:
                  type: string
                  description: The option the user is swapping from.
                  example: "Option A"
                optionTo:
                  type: string
                  description: The option the user is swapping to.
                  example: "Option B"
                amountToSwap:
                  type: number
                  description: The amount the user wants to swap.
                  example: 50
                timestamp:
                  type: integer
                  description: The timestamp of the transaction in epoch (seconds).
                  example: 1637782800
      responses:
        '200':
          description: Successfully signed swap transaction
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 200
                  message:
                    type: string
                    example: "Transaction signed successfully"
                  data:
                    type: object
                    properties:
                      signature:
                        type: string
                        description: The signed message from the private key.
                        example: "0x4e9b98f34d97c0e2b1e76c89a6c1995e50e207e8d7fdb53ed8ff035b0fe9512d56e92f7b6b287585fcdc8466da923ad0e1f071d3b22005145c13f2f313b06f41"
        '400':
          description: Bad request, invalid input
        '500':
          description: Internal server error
  /pools/sign-add-liquidity:
    post:
      summary: Signs an add liquidity transaction for the pool.
      description: This endpoint allows a user to sign a transaction to add liquidity to a pool.
      tags:
        - Pools
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                walletAddress:
                  type: string
                  description: The Ethereum address of the user.
                  example: "0x5b1b2268f3a563c3a65b1f2a34032c73e607ec6c"
                totalAmount:
                  type: number
                  description: The total amount the user wants to add to the pool (in USDT).
                  example: 1000
                timestamp:
                  type: integer
                  description: The timestamp of the transaction in epoch (seconds).
                  example: 1637782800
      responses:
        '200':
          description: Successfully signed add liquidity transaction
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 200
                  message:
                   type: string
                    example: "Add liquidity transaction signed successfully"
                  data:
                    type: object
                    properties:
                      signature:
                        type: string
                        description: The signed message from the private key.
                        example: "0x4e9b98f34d97c0e2b1e76c89a6c1995e50e207e8d7fdb53ed8ff035b0fe9512d56e92f7b6b287585fcdc8466da923ad0e1f071d3b22005145c13f2f313b06f41"
        '400':
          description: Bad request, invalid input
      '500':
        description: Internal server error
  /pools/public-pools:
    get:
      summary: "Retrieve a list of public pools"
      description: "Fetches a paginated list of public pools. Supports filtering by tags."
      operationId: "getPublicPoolList"
      tags:
        - "Pools"
      parameters:
        - name: "limit"
          in: "query"
          description: "Number of pools to fetch per page. Default is 10."
          required: false
          schema:
            type: integer
            example: 10
        - name: "offset"
          in: "query"
          description: "Page number for pagination. Default is 1."
          required: false
          schema:
            type: integer
            example: 1
        - name: "tag"
          in: "query"
          description: "Filter pools by tag. Matching is case-insensitive."
          required: false
          schema:
            type: string
            example: "movies"
      responses:
        200:
          description: "Public pool list retrieved successfully"
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 200
                  message:
                    type: string
                    example: "Public pool list retrieved successfully."
                  data:
                    type: object
                    properties:
                      pools:
                        type: array
                        description: "List of public pools."
                        items:
                          type: object
                          properties:
                            _id:
                              type: string
                              description: "Unique identifier for the pool."
                              example: "67485b984a2f4e38b8c976b7"
                            question:
                              type: string
                              description: "The question for the pool."
                              example: "Who will win the next soccer match?"
                            tags:
                              type: array
                              description: "Tags associated with the pool."
                              items:
                                type: string
                                example: "movies"
                            options:
                              type: array
                              description: "Available options for the pool."
                              items:
                                type: object
                                properties:
                                  optionName:
                                    type: string
                                    description: "Name of the option."
                                    example: "Team A"
                                  optionImage:
                                    type: string
                                    description: "URL of the option's image."
                                    example: "https://example.com/team-a.jpg"
                            createdAt:
                              type: string
                              format: date-time
                              description: "Creation timestamp of the pool."
                              example: "2024-12-01T00:00:00Z"
                            isPrivate:
                              type: boolean
                              description: "Indicates if the pool is private."
                              example: false
                      count:
                        type: integer
                        description: "Total number of public pools matching the criteria."
                        example: 50
                      pages:
                        type: integer
                        description: "Total number of pages."
                        example: 5
        400:
          description: "Bad request, invalid or missing query parameters."
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 400
                  message:
                    type: string
                    example: "Bad request, invalid query parameters."
        500:
          description: "Internal server error."
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 500
                  message:
                    type: string
                    example: "An internal server error occurred."
  /pools/pools-private:
    get:
      summary: "Retrieve a list of private pools"
      description: "Fetches a paginated list of private pools. Supports filtering by tags."
      operationId: "getPrivatePoolList"
      tags:
        - "Pools"
      parameters:
        - name: "limit"
          in: "query"
          description: "Number of pools to fetch per page. Default is 10."
          required: false
          schema:
            type: integer
            example: 10
        - name: "offset"
          in: "query"
          description: "Page number for pagination. Default is 1."
          required: false
          schema:
            type: integer
            example: 1
        - name: "tag"
          in: "query"
          description: "Filter pools by tag. Matching is case-insensitive."
          required: false
          schema:
            type: string
            example: "movies"
      responses:
        200:
          description: "Private pool list retrieved successfully"
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 200
                  message:
                    type: string
                    example: "Private pool list retrieved successfully."
                  data:
                    type: object
                    properties:
                      pools:
                        type: array
                        description: "List of private pools."
                        items:
                          type: object
                          properties:
                            _id:
                              type: string
                              description: "Unique identifier for the pool."
                              example: "67485b984a2f4e38b8c976b7"
                            question:
                              type: string
                              description: "The question for the pool."
                              example: "Who will win the next soccer match?"
                            tags:
                              type: array
                              description: "Tags associated with the pool."
                              items:
                                type: string
                                example: "movies"
                            options:
                              type: array
                              description: "Available options for the pool."
                              items:
                                type: object
                                properties:
                                  optionName:
                                    type: string
                                    description: "Name of the option."
                                    example: "Team A"
                                  optionImage:
                                    type: string
                                    description: "URL of the option's image."
                                    example: "https://example.com/team-a.jpg"
                            createdAt:
                              type: string
                              format: date-time
                              description: "Creation timestamp of the pool."
                              example: "2024-12-01T00:00:00Z"
                            isPrivate:
                              type: boolean
                              description: "Indicates if the pool is private."
                              example: true
                      count:
                        type: integer
                        description: "Total number of private pools matching the criteria."
                        example: 20
                      pages:
                        type: integer
                        description: "Total number of pages."
                        example: 2
        400:
          description: "Bad request, invalid or missing query parameters."
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 400
                  message:
                    type: string
                    example: "Bad request, invalid query parameters."
        500:
          description: "Internal server error."
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 500
                  message:
                    type: string
                    example: "An internal server error occurred."
  /pools/pool/{id}:
    get:
      summary: "Get a pool by its ID"
      description: "Fetches the details of a specific pool by its unique ID."
      operationId: "getPoolById"
      tags:
        - "Pools"
      parameters:
        - name: "id"
          in: "path"
          description: "The unique identifier of the pool to retrieve."
          required: true
          schema:
            type: string
            example: "67485e6eea061129838ecb7b"
      responses:
        200:
          description: "Pool fetched successfully"
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 200
                  message:
                    type: string
                    example: "Pool fetched successfully."
                  data:
                    type: object
                    properties:
                      _id:
                        type: string
                        description: "Unique identifier for the pool."
                        example: "67485e6eea061129838ecb7b"
                      question:
                        type: string
                        description: "The question for the pool."
                        example: "Will the price of ETH rise in the next week?"
                      tags:
                        type: array
                        description: "Tags associated with the pool."
                        items:
                          type: string
                          example: "cryptocurrency"
                      options:
                        type: array
                        description: "Available options for the pool."
                        items:
                          type: object
                          properties:
                            optionName:
                              type: string
                              description: "Name of the option."
                              example: "Yes"
                            optionImage:
                              type: string
                              description: "URL of the option's image."
                              example: "https://example.com/yes-option.jpg"
                      poolTypeData:
                        type: array
                        description: "Data specific to the pool type."
                        items:
                          type: object
                          properties:
                            minimumOracles:
                              type: integer
                              description: "Minimum number of oracles required for the pool."
                              example: 3
                            maximumOracles:
                              type: integer
                              description: "Maximum number of oracles allowed for the pool."
                              example: 5
                            rewardType:
                              type: string
                              enum: ["fixedAmount", "baseAmountPlusBonus"]
                              description: "Type of reward for the pool."
                              example: "fixedAmount"
                            rewardDetails:
                              type: object
                              properties:
                                fixedAmount:
                                  type: object
                                  properties:
                                    rewardAmountPerOracle:
                                      type: integer
                                      description: "The reward amount per oracle."
                                      example: 100
                                baseAmountPlusBonus:
                                  type: object
                                  properties:
                                    baseAmountPerOracle:
                                      type: integer
                                      description: "Base reward amount per oracle."
                                      example: 50
                                    associatedDealSize:
                                      type: integer
                                      description: "Associated deal size for the pool."
                                      example: 1000
                                    bonusPercentage:
                                      type: integer
                                      description: "Bonus percentage for the reward."
                                      example: 10
                      createdAt:
                        type: string
                        format: date-time
                        description: "Creation timestamp of the pool."
                        example: "2024-12-01T00:00:00Z"
                      updatedAt:
                        type: string
                        format: date-time
                        description: "Last update timestamp of the pool."
                        example: "2024-12-02T00:00:00Z"
                      isPrivate:
                        type: boolean
                        description: "Indicates if the pool is private."
                        example: false
        400:
          description: "Invalid Pool ID format or missing parameter."
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 400
                  message:
                    type: string
                    example: "Invalid Pool ID format or missing parameter."
        404:
          description: "Pool not found with the given ID."
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 404
                  message:
                    type: string
                    example: "Pool not found."
        500:
          description: "Internal server error."
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 500
                  message:
                    type: string
                    example: "An internal server error occurred."
  /pools/pool-listing-by-creator:
    get:
      summary: "Get pool listings by creator"
      description: "Fetches pools created by a specific user (creator). You can filter between private and public pools using the `filter` query parameter."
      operationId: "getPoolsByCreator"
      tags:
        - "Pools"
      parameters:
        - name: "limit"
          in: "query"
          description: "The number of pools to fetch per page."
          required: true
          schema:
            type: integer
            example: 10
        - name: "offset"
          in: "query"
          description: "The page number or offset to fetch pools."
          required: true
          schema:
            type: integer
            example: 1
        - name: "filter"
          in: "query"
          description: "Filter pools by type. Can be 'privatePools', 'publicPools', or undefined for public pools only."
          required: false
          schema:
            type: string
            enum: ["privatePools", "publicPools"]
            example: "publicPools"
      responses:
        200:
          description: "Pools fetched successfully"
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 200
                  message:
                    type: string
                    example: "Pools fetched successfully."
                  data:
                    type: object
                    properties:
                      pools:
                        type: array
                        items:
                          type: object
                          properties:
                            _id:
                              type: string
                              description: "Unique identifier for the pool."
                              example: "67485e6eea061129838ecb7b"
                            question:
                              type: string
                              description: "The question for the pool."
                              example: "Will the price of ETH rise in the next week?"
                            tags:
                              type: array
                              items:
                                type: string
                                example: "cryptocurrency"
                            options:
                              type: array
                              items:
                                type: object
                                properties:
                                  optionName:
                                    type: string
                                    example: "Yes"
                                  optionImage:
                                    type: string
                                    example: "https://example.com/yes-option.jpg"
                            createdAt:
                              type: string
                              format: date-time
                              example: "2024-12-01T00:00:00Z"
                            updatedAt:
                              type: string
                              format: date-time
                              example: "2024-12-02T00:00:00Z"
                            isPrivate:
                              type: boolean
                              example: false
                      count:
                        type: integer
                        description: "Total number of pools matching the query."
                        example: 25
                      pages:
                        type: integer
                        description: "Total number of pages based on the limit."
                        example: 3
        400:
          description: "Invalid query parameters."
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 400
                  message:
                    type: string
                    example: "Invalid parameters, please check your query."
        500:
          description: "Internal server error."
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 500
                  message:
                    type: string
                    example: "Internal server error."
  /pools/declare-winner:
    post:
      summary: "Declare the winner of a pool"
      description: "This API allows the creator of the pool to declare the winner by selecting an option."
      operationId: "declareWinner"
      tags:
        - Pools
      parameters:
        - in: path
          name: poolId
          required: true
          description: "The ID of the pool where the winner will be declared."
          schema:
            type: string
            format: objectid
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                winnerOption:
                  type: object
                  properties:
                    choiceIndex:
                      type: integer
                      description: "The index of the option in the pool's options array."
                      example: 1
      responses:
        200:
          description: "Winner declared successfully"
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 200
                  message:
                    type: string
                    example: "Winner declared successfully"
                  data:
                    type: object
                    properties:
                      poolId:
                        type: string
                        description: "The ID of the pool"
                        example: "67485e6eea061129838ecb7b"
                      winnerOption:
                        type: object
                        properties:
                          optionIndex:
                            type: integer
                            example: 1
                          optionId:
                            type: string
                            description: "The ID of the option selected as the winner"
                            example: "60d5f3a5b0a7ac001c2d51a3"
        400:
          description: "Bad request, invalid choiceIndex"
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 400
                  message:
                    type: string
                    example: "Invalid choiceIndex"
        404:
          description: "Pool not found or not authorized"
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 404
                  message:
                    type: string
                    example: "Pool not found"
        500:
          description: "Internal server error"
          content:
            application/json:
              schema:
                type: object
                properties:
                  statusCode:
                    type: integer
                    example: 500
                  message:
                    type: string
                    example: "Error declaring winner"


components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  responses:
    UserSignupSuccess:
      description: User registered successfully
      content:
        application/json:
          schema:
            type: object
            properties:
              statusCode:
                type: integer
                description: Status code denoting API response
                example: 201
              message:
                type: string
                description: Descriptive message describing response
                example: "User Registered"
              token:
                type: string
                example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
              user:
                type: object
                properties:
                  _id:
                    type: string
                    example: "60b6c72b7c71bf76c5d4be65"
                  name:
                    type: string
                    example: "John Doe"
                  walletAddress:
                    type: string
                    example: "0x1234567890abcdef1234567890abcdef12345678"

    UnauthorizedError:
      description: Unauthorized access
      content:
        application/json:
          schema:
            type: object
            properties:
              msg:
                type: string
                example: "Unauthorized"

    BadRequestError:
      description: Bad request, missing required fields
      content:
        application/json:
          schema:
            type: object
            properties:
              msg:
                type: string
                example: "All inputs are required"

    ConflictError:
      description: Conflict, user already exists
      content:
        application/json:
          schema:
            type: object
            properties:
              msg:
                type: string
                example: "User already exists"
    InternalServerError:
      description: Internal Server Error, something went wrong on the server
      content:
        application/json:
          schema:
            type: object
            properties:
              msg:
                type: string
                example: "Error during registration: <error message>"
    LoginSuccess:
      description: Successful user login with wallet address
      content:
        application/json:
          schema:
            type: object
            properties:
              status:
                type: boolean
                example: true
              msg:
                type: string
                example: "User Logged In"
              token:
                type: string
                example: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
              user:
                type: object
                properties:
                  _id:
                    type: string
                    example: "60b6c72b7c71bf76c5d4be65"
                  name:
                    type: string
                    example: "John Doe"
                  walletAddress:
                    type: string
                    example: "0x1234567890abcdef1234567890abcdef12345678"
    UserNotFoundError:
      summary: User not found
      type: object
      properties:
        statusCode:
          type: integer
          example: 404
        message:
          type: string
          example: User not found
        details:
          example: null
    UserNotFound:
      description: User not found with the provided wallet address
      content:
        application/json:
          schema:
            type: object
            properties:
              statusCode:
                type: integer
                example: 404
              message:
                type: string
                example: "User doesn't exist"
    UserRetrievedSuccess:
      description: Successfully retrieved the user based on wallet address
      content:
        application/json:
          schema:
            type: object
            properties:
              statusCode:
                type: integer
                example: 200
              message:
                type: string
                example: "User retrieved successfully"
              data:
                type: object
                properties:
                  _id:
                    type: string
                    example: "60b6c72b7c71bf76c5d4be65"
                  name:
                    type: string
                    example: "John Doe"
                  walletAddress:
                    type: string
                    example: "0xF2Adc1FAC6629B567cF60154C3FEA4e498E58C91"

  